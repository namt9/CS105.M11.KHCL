<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transformation</title>
    <script src='/three.min.js'></script>
</head>

<body>
    <script>
        // step1: create scene
        var scene = new THREE.Scene();
        // step2: create camera
        var camera = new THREE.PerspectiveCamera(25, window.innerWidth/window.innerHeight, 1, 1000)
        // step3: create renderer
        var renderer = new THREE.WebGLRenderer({antialias:true});
        renderer.setClearColor("gray");
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true; // đổ bóng
        renderer.shadowMap.type = THREE.PCFSoftShadowMap; // kiểu đổ bóng
        document.body.appendChild( renderer.domElement ); // add renderer vô canvas

        // step4: create cube
        // a) one color:
        // var cubeGeo = new THREE.BoxGeometry(8,5,5);
        // var cubeMaterial = new THREE.MeshLambertMaterial({color:"tomato"});
        // var cube = new THREE.Mesh(cubeGeo,cubeMaterial);
        // cube.castShadow = true; // đổ bóng
        // scene.add(cube);
        // b) custom colors:
        var cubeGeo = new THREE.BoxGeometry(8,5,5);
        var cubes = [];  // just an array we can use to rotate the cubes
        var loader = new THREE.TextureLoader();
        
        var cubeMaterial = [
            new THREE.MeshBasicMaterial({map: loader.load('ars1.jpg')}),
            new THREE.MeshBasicMaterial({map: loader.load('ars2.jpg')}),
            new THREE.MeshBasicMaterial({map: loader.load('ars3.jpg')}),
            new THREE.MeshBasicMaterial({map: loader.load('ars4.jpg')}),
            new THREE.MeshBasicMaterial({map: loader.load('ars5.jpg')}),
            new THREE.MeshBasicMaterial({map: loader.load('ars6.jpg')}),
        ];
        
        var cube = new THREE.Mesh(cubeGeo, cubeMaterial);
        cube.castShadow = true; // đổ bóng
        scene.add(cube);
        cubes.push(cube);  // add to our list of cubes to rotate

        // step5: create plane
        var planeGeo = new THREE.PlaneGeometry(50,50,50);
        var planeMaterial = new THREE.MeshLambertMaterial({color:"lavender"});
        var plane = new THREE.Mesh(planeGeo,planeMaterial);
        plane.rotation.x = -Math.PI/2;  // -90 độ
        plane.receiveShadow = true; // nhận bóng từ cube
        scene.add(plane);
        // step6: create spot light (THIẾT LẬP NGUỒN SÁNG)
        // a) đèn chiếu sáng 1 hướng
        // var spotLight = new THREE.SpotLight(0xffffff);
        // spotLight.position.set(30,30,100);
        // spotLight.castShadow = true;
        // scene.add(spotLight);

        // b) quả cầu phát sáng từ mọi phía (dạng Mặt Trời)
        const light = new THREE.PointLight('rgb(255,255,255)');
        light.position.set(30, 30, 100);
        light.castShadow = true;
        scene.add(light);


        function Loop() 
        {
            // PHÉP QUAY
            cube.rotation.x += 0.02
            cube.rotation.y += 0.03
            cube.rotation.z += 0.05

            //PHÉP TỈ LỆ
            cube.scale.set(1,2,1);

            //PHÉP TỊNH TIẾN
            cube.position.set(5,7,7);

            //THAY ĐỔI CAMERA LOOKAT
            camera.lookAt(2,4,-5);

            //THAY ĐỔI VRP CAMERA
            camera.position.set(100,30,70); // VRP,V-look,V-up

            renderer.render(scene, camera)
            requestAnimationFrame(Loop)
        }

        // step7: loop to have the amination
        Loop()
    </script>
</body>
</html>
